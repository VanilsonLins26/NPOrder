<div class="surface-ground min-h-screen p-4">
    <div class="surface-card p-4 shadow-2 border-round">
        <div class="text-3xl font-bold text-900 mb-4 brand-font">Meus Pedidos</div>

        <p-table [value]="orders" [lazy]="true" (onLazyLoad)="loadOrders($event)" 
                 [paginator]="true" [rows]="pageSize" [totalRecords]="totalRecords" 
                 [loading]="loading" responsiveLayout="stack" breakpoint="960px">
            
            <ng-template pTemplate="header">
                <tr>
                    <th>Nº Pedido</th>
                    <th>Data</th>
                    <th>Status</th>
                    <th>Total</th>
                    <th>Ações</th>
                </tr>
            </ng-template>
            
            <ng-template pTemplate="body" let-order>
                <tr>
                    <td><span class="p-column-title font-bold">Nº:</span> #{{ order.id }}</td>
                    <td><span class="p-column-title font-bold">Data:</span> {{ order.orderTime | date:'dd/MM/yyyy HH:mm' }}</td>
                    <td>
                        <span class="p-column-title font-bold">Status:</span>
                        <p-tag [value]="getStatusLabel(order.statusName)" 
                               [severity]="getStatusSeverity(order.statusName)">
                        </p-tag>
                    </td>
                    <td><span class="p-column-title font-bold">Total:</span> {{ order.totalAmount | currency:'BRL' }}</td>
                    <td>
                        <div class="flex gap-2">
                            <p-button icon="pi pi-search" label="Detalhes" 
                                      styleClass="p-button-rounded p-button-outlined p-button-sm"
                                      (onClick)="viewDetails(order.id)">
                            </p-button>
                        </div>
                    </td>
                </tr>
            </ng-template>

            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="5" class="text-center p-4">Nenhum pedido encontrado.</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>